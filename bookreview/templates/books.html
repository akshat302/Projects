{% extends "layout.html" %}


{% block body %}
    <h2>Hi {{ user }}</h2>
    <form action="{{ url_for('books') }}" method="post">
        <div class="form-group">

            <label for="category">Search by</label>
            <select class="form-control" name="category">
                <option value="ISBN">ISBN</option>
                <option value="Author">Author Name</option>
                <option value="Title">Book Name</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="query">Enter The Search</label>
            <input class="form-control" type="text" name="search">
        </div>

        <div class="form-group">
            <button class="btn btn-primary">Submit</button>
        </div>
    </form>
    
    {% if data is none %}
        <br>
        <h2>{{ category }} cannot be empty.</h2>

    {% elif data and data.status == 200 %}

        {% if data.books %}
            <h1>Related Searches</h1>
            <table class="table table-dark">
                <thead>
                    <th scope="col">ISBN</th>
                    <th scope="col">Author</th>
                    <th scope="col">Title</th>
                    <th scope="col"></th>
                </thead>
                <tbody>
                    {% for book in data.books %}
                        <tr>    
                            <td>{{ book.isbn }}</td>
                            <td>{{ book.author }}</td>
                            <td>{{ book.title }}</td>
                            <td><a href="{{ url_for('about', isbn = book.isbn)  }}">Details</a></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            
        {% else %}
            <br>
            <h2>No results found !!</h2>
        {% endif %}
    {% endif %}

    <br>
    <a href="{{ url_for('logout') }}">Logout</a>

{% endblock %}